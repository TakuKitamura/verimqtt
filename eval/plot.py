import subprocess
import time
import random
import matplotlib.pyplot as plt
import japanize_matplotlib
import numpy as np


fig = plt.figure()

ax = fig.add_subplot()

y1 = np.array([4.173399999999999, 3201.5923, 5920.5154999999995, 5434.117800000001, 7578.815299999999, 10112.689000000002, 9737.961299999999, 8320.0885, 9324.856600000001, 9663.244, 13776.780299999999, 17052.6886, 12707.573699999999, 15574.7337, 14999.450100000002, 15863.791300000003, 17543.5682, 17787.5179, 18947.0169, 19920.2878, 21484.1273, 33160.555, 22841.484699999997, 35131.1701, 28666.207000000002, 45763.0201, 36424.278999999995, 33425.1004, 39452.229999999996, 41731.0567, 35270.6896, 34677.60729999999, 33349.1502, 39292.770000000004, 35390.3378, 36630.1344, 39241.177, 46285.2709, 46450.99769999999, 41468.20219999999, 40173.540199999996, 41804.076400000005, 41523.5757, 60135.93319999999, 45843.4758, 46321.44729999999, 45869.7271, 48285.6759, 49722.9417, 52869.03540000001])
y1 = y1 / 1000


y2 = np.array([5.938, 15042.540399999998, 26934.659399999997, 42119.8763, 54358.14400000001, 59078.9419, 71684.10449999999, 91017.9523, 101576.05789999999, 103699.2599, 114758.44879999998, 118408.94899999998, 146673.2993, 164179.815, 180980.1247, 173129.77779999998, 195522.6662, 195171.9191, 203182.8943, 213441.65510000003, 246662.30899999995, 229197.194, 292993.35959999997, 370040.6051, 418102.81779999996, 368439.557, 435343.717, 453790.22520000004, 462376.3121999999, 462179.18389999995, 385112.9487, 445036.75889999996, 425255.7879, 456371.3348, 428417.3124, 478786.55350000004, 453745.0363, 487807.40100000007, 461078.73470000003, 495578.24399999995, 514201.2852, 522267.8125, 540146.3751, 536512.7133000001, 567631.0926, 558254.9691, 601716.1884, 593224.6503, 667182.8274, 611545.9898999999])
y2 = y2 / 1000

y3 = [0.031, 1.1755000000000002, 2.2749999999999995, 3.477, 4.6132, 5.712666666666667, 6.804, 7.892125, 8.986333333333334, 10.0996, 11.169363636363636, 12.2395, 13.295000000000002, 14.385357142857144, 15.414933333333334, 16.357437500000003, 17.283529411764707, 18.199833333333334, 19.037157894736843, 19.915000000000003, 20.938428571428574, 21.780727272727276, 22.611086956521742, 23.479708333333335, 24.339720000000003, 25.093038461538466, 26.003666666666668, 26.84096428571429, 27.69951724137931, 28.584433333333337, 29.409000000000006, 30.267500000000002, 31.131636363636364, 31.941088235294124, 32.75911428571429, 33.54811111111112, 34.288702702702714, 35.113342105263165, 35.940205128205136, 36.80157500000001, 37.63802439024391, 38.4829761904762, 39.27448837209303, 40.070022727272736, 40.871533333333346, 41.65852173913045, 42.49944680851065, 43.33847916666669, 44.11932653061226, 44.953800000000015]

x = [0.0, 5.478274000000001, 10.956548000000002, 16.434822, 21.913096000000003, 27.39137, 32.869644, 38.347918, 43.826192000000006, 49.304466, 54.78274, 60.261014, 65.739288, 71.217562, 76.695836, 82.17411, 87.65238400000001, 93.130658, 98.608932, 104.08720600000001, 109.56548, 115.043754, 120.522028, 126.00030199999999, 131.478576, 136.95685, 142.435124, 147.91339799999997, 153.391672, 158.869946, 164.34822, 169.826494, 175.30476800000002, 180.783042, 186.261316, 191.73959, 197.217864, 202.69613800000002, 208.17441200000002, 213.652686, 219.13096, 224.609234, 230.087508, 235.565782, 241.044056, 246.52232999999998, 252.00060399999998, 257.478878, 262.957152, 268.43542599999995]

ax.plot(x, y2, marker='', label='① F*パケットパーサー(Rust内部から呼び出し)')
ax.plot(x, y1, marker='', label='② Rustパケットパーサー')
ax.plot(x, y3, marker='', label='③ F*パケットパーサー')

plt.title('パケットサイズとパケットパース時間の関係')
plt.xlabel('パケットサイズ [mb]')
plt.ylabel('1パケットあたりのパース時間 [ms]')

plt.legend()

plt.show()